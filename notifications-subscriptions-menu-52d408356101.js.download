"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["notifications-subscriptions-menu"],{50045:(e,t,s)=>{s.d(t,{I:()=>n});let n=(0,s(96540).createContext)(null)},13080:(e,t,s)=>{s.d(t,{C:()=>r,i:()=>l});var n=s(47584),a=s(75632),i=s(46493);function r(e,t){(0,a.G7)("arianotify_comprehensive_migration")?l(o(e),{...t,element:t?.element??e}):(0,a.G7)("primer_live_region_element")&&t?.element===void 0?(0,i.Cj)(e,{politeness:t?.assertive?"assertive":"polite"}):l(o(e),t)}function l(e,t){let{assertive:s,element:r}=t??{};(0,a.G7)("arianotify_comprehensive_migration")&&"ariaNotify"in Element.prototype?(r||document.body).ariaNotify(e,{interrupt:t?.assertive?"all":"none"}):(0,a.G7)("primer_live_region_element")&&void 0===r?(0,i.iP)(e,{politeness:s?"assertive":"polite"}):function(e,t,s){let a=s??n.XC?.querySelector(t?"#js-global-screen-reader-notice-assertive":"#js-global-screen-reader-notice");a&&(a.textContent===e?a.textContent=`${e}\u00A0`:a.textContent=e)}(e,s,r)}function o(e){return(e.getAttribute("aria-label")||e.innerText||"").trim()}},2640:(e,t,s)=>{s.d(t,{D:()=>i,Y:()=>r});var n=s(13080),a=s(47584);function i(e){if(!a.XC)return;let t=a.XC.querySelector("title"),s=a.XC.createElement("title");s.textContent=e,t?t.textContent!==e&&(t.replaceWith(s),(0,n.i)(e)):(a.XC.head.appendChild(s),(0,n.i)(e))}function r(e){return document.body.classList.contains("logged-out")?`${e} \xb7 GitHub`:e}},55156:(e,t,s)=>{s.d(t,{k:()=>i,t:()=>r});var n=s(75632),a=s(93108);function i(e){let t={"X-Requested-With":"XMLHttpRequest"};return(0,n.G7)("fetch_nonce_headers")&&(t={...t,...(0,a.wE)(e)}),t}function r(e,t){for(let[s,n]of Object.entries(i(t)))e.set(s,n)}},93108:(e,t,s)=>{s.d(t,{$r:()=>l,M1:()=>o,li:()=>a,wE:()=>c});var n=s(47584);let a="X-Fetch-Nonce",i=n.cg?.document?.head?.querySelector('meta[name="fetch-nonce"]')?.content||"",r=new Set;function l(e){r.add(e)}function o(){return r.values().next().value||""}function c(e){let t={};return e&&(t["X-Fetch-Nonce-To-Validate"]=e),e?r.has(e)?t[a]=e:t[a]=Array.from(r).join(","):t[a]=o(),t}i&&l(i)},73218:(e,t,s)=>{s.d(t,{l:()=>n});let n=()=>void 0},264:(e,t,s)=>{let n;var a,i=s(11110),r=s(74848),l=s(96540),o=s(89323),c=s(95776),d=s(38621),u=s(57572);let h=(n="/notifications/subscribe",async e=>{try{let t=await (0,u.DI)(n,{method:"POST",body:e});if(t.ok)return t;return Error("Failed to update")}catch(e){return e}});var m=s(8338),p=s(52464);let b={NONE:"none",WATCHING:"watching",IGNORING:"ignoring",CUSTOM:"custom"},f={[b.NONE]:"Participating and @mentions",[b.WATCHING]:"All Activity",[b.IGNORING]:"Ignore",[b.CUSTOM]:"Custom"},y={...f,[b.NONE]:"Participating"},x={[b.NONE]:"Watch",[b.WATCHING]:"Unwatch",[b.IGNORING]:"Stop ignoring",[b.CUSTOM]:"Unwatch"},C=[{name:f[b.NONE],description:"Only receive notifications from this repository when participating or @mentioned.",subscriptionType:b.NONE},{name:f[b.WATCHING],description:"Notified of all notifications on this repository.",subscriptionType:b.WATCHING},{name:f[b.IGNORING],description:"Never be notified.",subscriptionType:b.IGNORING},{name:f[b.CUSTOM],description:"Select events you want to be notified of in addition to participating and @mentions.",trailingIcon:(0,l.createElement)(d.ArrowRightIcon),subscriptionType:b.CUSTOM}],g=e=>e in x?x[e]:"",v=(e,t)=>{let s=g(e),n=y[e];return e===b.IGNORING?`${s} in ${t}`:`${s}: ${n} in ${t}`};function N(e){return(0,r.jsx)(m.l,{selectionVariant:"single",children:C.map((t,s)=>(0,r.jsxs)(l.Fragment,{children:[(0,r.jsxs)(m.l.Item,{selected:t.subscriptionType===e.selected,onSelect:()=>e.onSelect(t.subscriptionType),children:[(0,r.jsx)(p.A,{sx:{fontWeight:"bold"},children:t.name}),(0,r.jsx)(m.l.Description,{variant:"block",children:t.description}),t.trailingIcon?(0,r.jsx)(m.l.TrailingVisual,{children:t.trailingIcon}):null]}),s!==C.length-1?(0,r.jsx)(m.l.Divider,{}):""]},s))})}try{N.displayName||(N.displayName="SubscriptionList")}catch{}var _=s(73451),j=s(65607),T=s(3830),S=s(55847),I=s(94977);function w(e){let[t,s]=(0,l.useState)(!1),[n,a]=(0,l.useState)(""),i=e.items.filter(e=>e?.text?.toLowerCase().startsWith(n.toLowerCase())),o=l.memo(A);return(0,r.jsx)(T.X,{title:"Select labels",renderAnchor:t=>0===e.items.length?(0,r.jsx)(I.A,{text:"Add labels to this repository to filter on them.",direction:"s",children:(0,r.jsx)(o,{anchorProps:t,itemsLength:e.items.length,labelsText:e.labelsText})}):(0,r.jsx)(o,{anchorProps:t,itemsLength:e.items.length,labelsText:e.labelsText}),placeholderText:"Filter labels",open:t,onCancel:e.resetLabels,onOpenChange:(t,n)=>{s(t),"click-outside"===n&&e.applyLabels()},items:i,selected:e.selectedLabels,onSelectedChange:e.onChangeLabels,onFilterChange:a,showItemDividers:!0,overlayProps:{width:"small",height:"medium",maxHeight:"medium"}})}let A=({anchorProps:e,itemsLength:t,labelsText:s})=>(0,r.jsx)(S.Q,{leadingVisual:d.TagIcon,trailingAction:d.TriangleDownIcon,...e,"aria-label":"Filter labels","aria-describedby":"select-labels","aria-haspopup":"dialog",size:"small",disabled:0===t,children:0===t?"No labels available":(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"color-fg-muted",children:"Labels: "}),(0,r.jsx)("span",{id:"select-labels",children:s})]})});try{w.displayName||(w.displayName="FilterLabels")}catch{}try{(a=ButtonFilter).displayName||(a.displayName="ButtonFilter")}catch{}var k=s(63867);let R={footerContainer:"FooterActions-module__footerContainer--Z9ixI",buttonsContainer:"FooterActions-module__buttonsContainer--lkkwg"};function O(e){let[t,s]=(0,l.useState)(!1),n=(0,l.useCallback)(()=>(e.nextFocusRef?.current?.focus(),!0),[e.nextFocusRef]),a=(0,l.useCallback)(()=>{s(!0)},[]),i=(0,l.useCallback)(()=>{e.onApply(),setTimeout(()=>{e?.checkStatus&&e.checkStatus(a)},600)},[e,a]);return(0,r.jsxs)("div",{className:R.footerContainer,children:[e.showError?(0,r.jsx)(p.A,{sx:{py:3,pl:3,color:"var(--fgColor-muted, var(--color-fg-muted))"},children:"Error. Please try again."}):null,(0,r.jsxs)("div",{className:R.buttonsContainer,style:e.overrideButtonStyles??{padding:"var(--base-size-16)"},children:[!e.showError&&t?(0,r.jsx)(k.A,{size:"small",sx:{mr:2}}):null,(0,r.jsx)(S.Q,{size:"small",onClick:()=>e.onCancel(),onBlur:t=>{e.disabled&&n(t)},children:"Cancel"}),(0,r.jsx)(S.Q,{disabled:e.disabled,variant:"primary",size:"small",onClick:()=>i(),onBlur:n,sx:{ml:2},children:"Apply"})]})]})}try{O.displayName||(O.displayName="FooterActions")}catch{}let L=e=>{let t=E(e,2);if(e.length>=2){if(2===e.length)return G(e);let s=E(e,3);if(s.length>30)return`${t.slice(0,30)}... +${e.length-2} more`;{let t=e.length>3?` +${e.length-3} more`:"";return`${s}${t}`}}if(1!==e.length)return"All";{let t=e[0]?.text||"";return t.length>30?`${t.slice(0,30)}...`:t}},G=e=>{let t=e[0]?.text||"",s=E(e,2);return s.length>30?t.length>25?`${t.slice(0,25)}... +1 more`:`${s.slice(0,30)}...`:s},E=(e,t)=>e.slice(0,t).map(e=>e.text).join(", "),P=e=>{switch(e){case"PullRequest":return"Pull requests";case"SecurityAlert":return"Security alerts";default:return`${e}s`}},F={filterContainer:"ThreadList-module__filterContainer--eNebD",threadContent:"ThreadList-module__threadContent--Ry8II",threadRow:"ThreadList-module__threadRow--lx6FW"};function $(e){let[t,s]=(0,l.useState)(e.appliedThreads),[n,a]=(0,l.useState)(e.appliedLabels),[i,o]=(0,l.useState)(e.appliedLabels),[c,d]=(0,l.useState)(()=>L(e.appliedLabels));(0,l.useEffect)(()=>{e.appliedLabels.length>0&&!t.includes("Issue")&&s([...t,"Issue"])},[]);let u=(0,l.useCallback)(e=>{t&&t.includes(e)?s(t.filter(t=>t!==e)):s([...t,e])},[t]),h=(0,l.useCallback)(()=>{e.applyThreads(t)},[e,t]),m=(0,l.useCallback)(e=>{o(e),d(L(e))},[]),b=(0,l.useCallback)(()=>{a(i)},[i]),f=(0,l.useCallback)(()=>{o(n),d(L(n))},[n]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:F.threadContent,children:e.subscribableThreadTypes.map((s,n)=>(0,r.jsxs)("div",{className:F.threadRow,style:n===e.subscribableThreadTypes.length-1?{}:{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"},children:[(0,r.jsxs)(_.A,{children:[(0,r.jsx)(j.A,{checked:t.includes(s.name),onChange:()=>u(s.name)}),(0,r.jsx)(_.A.Label,{children:P(s.name)})]}),s.enabled?null:(0,r.jsxs)(p.A,{as:"p",sx:{fontSize:"12px",m:0,color:"var(--fgColor-muted)",ml:"var(--base-size-24)"},children:[P(s.name)," are not enabled for this repository"]}),(0,r.jsx)("div",{"aria-live":"polite",children:"Issue"===s.name&&e.showLabelSubscriptions&&t.includes("Issue")?(0,r.jsx)("div",{className:F.filterContainer,children:(0,r.jsx)(w,{filterAction:h,items:e.repoLabels,labelsText:c,onChangeLabels:m,selectedLabels:i,applyLabels:b,resetLabels:f})}):null})]},n))}),(0,r.jsx)(O,{onCancel:e.cancelMenuCallback,onApply:()=>e.saveThreads(t,i),showError:e.showError,disabled:0===t.length||e.isSavingThreads})]})}try{$.displayName||($.displayName="ThreadList")}catch{}let M={watchCounter:"NotificationsSubscriptionsMenu-module__watchCounter--nAbhU",watchButton:"NotificationsSubscriptionsMenu-module__watchButton--ifxlS"};function W({repositoryId:e,repositoryName:t,watchersCount:s,subscriptionType:n,subscribableThreadTypes:a,repositoryLabels:i,showLabelSubscriptions:u}){let m=(0,l.useMemo)(()=>i.map(e=>({id:e.id,text:e.name,selected:e.subscribed})),[i]),p=m.filter(e=>e.selected),f=(0,l.useMemo)(()=>a.map(e=>e.subscribed||"Issue"===e.name&&u&&p.length>0?e.name:null).filter(e=>null!==e),[a,u,p]),[y,x]=(0,l.useState)(!1),[C,_]=(0,l.useState)(!1),[j,T]=(0,l.useState)(f.length>0?b.CUSTOM:n),[S,I]=(0,l.useState)(j),[w,A]=(0,l.useState)(f),[k,R]=(0,l.useState)(p),[O,L]=(0,l.useState)(!1),G=(0,l.useRef)(null),E=(0,l.useCallback)(()=>{_(!1),T(S)},[S]),P=(0,l.useCallback)(async(t,s)=>{L(!0),A(t),R(s),I(b.CUSTOM);let n=new FormData;n.set("do","custom"),n.set("repository_id",e),t.map(e=>{n.append("thread_types[]",e)}),s.map(e=>{e.id&&n.append("labels[]",e.id.toString())}),(await h(n)).ok?(_(!1),L(!1)):x(!0)},[e]),F=(0,l.useCallback)(async t=>{let s=new FormData;t===b.IGNORING?s.set("do","ignore"):t===b.WATCHING?s.set("do","subscribed"):(t===b.NONE||t===b.CUSTOM&&0===w.length)&&s.set("do","included"),s.append("thread_types[]",""),s.set("repository_id",e),await h(s)},[e,w]),W=(0,l.useCallback)(e=>{e===b.CUSTOM?(_(!0),T(b.CUSTOM)):(T(e),I(e),F(e),A([]))},[T]),H=(0,l.useCallback)(e=>{A(e)},[A]),U=(0,l.useMemo)(()=>v(j,t),[j,t]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"d-md-none",children:(0,r.jsxs)(o.W,{children:[(0,r.jsx)(o.W.Button,{"data-testid":"notifications-subscriptions-menu-button-desktop",leadingVisual:j===b.IGNORING?d.BellSlashIcon:d.EyeIcon,trailingAction:null,className:M.watchButton,"aria-label":U,children:(0,r.jsx)(r.Fragment,{})}),(0,r.jsx)(o.W.Overlay,{width:"medium",children:(0,r.jsx)(N,{selected:j,onSelect:W})})]})}),(0,r.jsx)("div",{className:"d-none d-md-block",children:(0,r.jsxs)(o.W,{children:[(0,r.jsxs)(o.W.Button,{"data-testid":"notifications-subscriptions-menu-button-mobile",size:"small",leadingVisual:j===b.IGNORING?d.BellSlashIcon:d.EyeIcon,sx:{'&& [data-component="leadingVisual"]':{color:"var(--fgColor-muted, var(--color-fg-muted))"}},"aria-label":U,children:[g(j),(0,r.jsx)("span",{className:`ml-2 Counter rounded-3 ${M.watchCounter}`,children:s})]}),(0,r.jsx)(o.W.Overlay,{width:"medium",children:(0,r.jsx)(N,{selected:j,onSelect:W})})]})}),(0,r.jsx)(c.A,{returnFocusRef:G,isOpen:C,onDismiss:()=>E(),"aria-labelledby":"header",children:(0,r.jsxs)("div",{"data-testid":"inner",children:[(0,r.jsxs)(c.A.Header,{id:"header",children:["Subscribe to events for ",t]}),(0,r.jsx)($,{subscribableThreadTypes:a,showLabelSubscriptions:u,cancelMenuCallback:E,appliedThreads:w,repoLabels:m,subscribedThreads:f,applyThreads:H,appliedLabels:k,saveThreads:P,showError:y,isSavingThreads:O})]})})]})}try{W.displayName||(W.displayName="NotificationsSubscriptionsMenu")}catch{}(0,i.k)("notifications-subscriptions-menu",{Component:W})},64128:(e,t,s)=>{s.d(t,{Y:()=>n});function n(){let e={};return e.promise=new Promise((t,s)=>{e.resolve=t,e.reject=s}),e}},74753:(e,t,s)=>{s.d(t,{A:()=>l});let{getItem:n,setItem:a,removeItem:i}=(0,s(80688).A)("localStorage"),r="REACT_PROFILING_ENABLED",l={enable:()=>a(r,"true"),disable:()=>i(r),isEnabled:()=>!!n(r)}},45996:(e,t,s)=>{s.d(t,{A:()=>i});var n=s(38568),a=s(96540);function i(){let e=(0,a.useRef)(!1),t=(0,a.useCallback)(()=>e.current,[]);return(0,n.N)(()=>(e.current=!0,()=>{e.current=!1}),[]),t}},38568:(e,t,s)=>{s.d(t,{N:()=>i});var n=s(47584),a=s(96540);let i=void 0!==n.cg?.document?.createElement?a.useLayoutEffect:a.useEffect},82060:(e,t,s)=>{s.d(t,{A:()=>i});var n=s(45996),a=s(96540);let i=function(e){let t=(0,n.A)(),[s,i]=(0,a.useState)(e);return[s,(0,a.useCallback)(e=>{t()&&i(e)},[t])]}},57572:(e,t,s)=>{s.d(t,{DI:()=>a,QJ:()=>r,Sr:()=>l,lS:()=>i});var n=s(55156);function a(e,t={}){!function(e){if(new URL(e,window.location.origin).origin!==window.location.origin)throw Error("Can not make cross-origin requests from verifiedFetch")}(e);let s=function(e){let t=new URL(e,window.location.href),s=new URL(window.location.href,window.location.origin),n=s.searchParams.get("_features");n&&!t.searchParams.has("_features")&&t.searchParams.set("_features",n);let a=s.searchParams.get("_tracing");return a&&!t.searchParams.has("_tracing")&&t.searchParams.set("_tracing",a),e.startsWith(window.location.origin)?t.href:`${t.pathname}${t.search}`}(e),i={...t.headers,"GitHub-Verified-Fetch":"true",...(0,n.k)()};return fetch(s,{...t,headers:i})}function i(e,t){let s={...t?.headers??{},Accept:"application/json","Content-Type":"application/json"},n=t?.body?JSON.stringify(t.body):void 0;return a(e,{...t,body:n,headers:s})}function r(e,t={}){let s={...t.headers,"GitHub-Is-React":"true"};return a(e,{...t,headers:s})}function l(e,t){let s={...t?.headers??{},"GitHub-Is-React":"true"};return i(e,{...t,headers:s})}},59418:(e,t,s)=>{s.d(t,{y:()=>r});var n=s(74848),a=s(21728),i=s(50045);function r(e){let t,s,r;let l=(0,a.c)(7),{children:o,appName:c,category:d,metadata:u}=e;return l[0]!==c||l[1]!==d||l[2]!==u?(s={appName:c,category:d,metadata:u},l[0]=c,l[1]=d,l[2]=u,l[3]=s):s=l[3],t=s,l[4]!==o||l[5]!==t?(r=(0,n.jsx)(i.I.Provider,{value:t,children:o}),l[4]=o,l[5]=t,l[6]=r):r=l[6],r}try{r.displayName||(r.displayName="AnalyticsProvider")}catch{}},18347:(e,t,s)=>{s.d(t,{BP:()=>u,D3:()=>d,O8:()=>o});var n=s(74848),a=s(21728),i=s(96540),r=s(47584),l=s(38568);let o={ServerRender:"ServerRender",ClientHydrate:"ClientHydrate",ClientRender:"ClientRender"},c=(0,i.createContext)(o.ClientRender);function d(e){let t,s,d,u;let h=(0,a.c)(8),{wasServerRendered:m,children:p}=e;h[0]!==m?(t=()=>r.X3?o.ServerRender:m?o.ClientHydrate:o.ClientRender,h[0]=m,h[1]=t):t=h[1];let[b,f]=(0,i.useState)(t);return h[2]!==b?(s=()=>{b!==o.ClientRender&&f(o.ClientRender)},d=[b],h[2]=b,h[3]=s,h[4]=d):(s=h[3],d=h[4]),(0,l.N)(s,d),h[5]!==p||h[6]!==b?(u=(0,n.jsx)(c.Provider,{value:b,children:p}),h[5]=p,h[6]=b,h[7]=u):u=h[7],u}function u(){return(0,i.useContext)(c)}try{c.displayName||(c.displayName="RenderPhaseContext")}catch{}try{d.displayName||(d.displayName="RenderPhaseProvider")}catch{}},67136:(e,t,s)=>{s.d(t,{Qn:()=>o,T8:()=>d,Y6:()=>h,k6:()=>u});var n=s(74848),a=s(65556),i=s(96540),r=s(73218),l=s(82060);let o=5e3,c=(0,i.createContext)({addToast:r.l,addPersistedToast:r.l,clearPersistedToast:r.l}),d=(0,i.createContext)({toasts:[],persistedToast:null});function u({children:e}){let[t,s]=(0,l.A)([]),[r,u]=(0,i.useState)(null),{safeSetTimeout:h}=(0,a.A)(),m=(0,i.useCallback)(function(e){s([...t,e]),h(()=>s(t.slice(1)),o)},[t,h,s]),p=(0,i.useCallback)(function(e){u(e)},[u]),b=(0,i.useCallback)(function(){u(null)},[u]),f=(0,i.useMemo)(()=>({addToast:m,addPersistedToast:p,clearPersistedToast:b}),[p,m,b]),y=(0,i.useMemo)(()=>({toasts:t,persistedToast:r}),[t,r]);return(0,n.jsx)(c.Provider,{value:f,children:(0,n.jsx)(d.Provider,{value:y,children:e})})}function h(){return(0,i.useContext)(c)}try{c.displayName||(c.displayName="ToastContext")}catch{}try{d.displayName||(d.displayName="InternalToastsContext")}catch{}try{u.displayName||(u.displayName="ToastContextProvider")}catch{}},91958:(e,t,s)=>{s.d(t,{V:()=>h});var n=s(74848),a=s(96540),i=s(67136),r=s(38621),l=s(65556),o=s(16255);let c={info:"",success:"Toast--success",error:"Toast--error"},d={info:(0,n.jsx)(r.InfoIcon,{}),success:(0,n.jsx)(r.CheckIcon,{}),error:(0,n.jsx)(r.StopIcon,{})},u=({message:e,timeToLive:t,icon:s,type:i="info",role:r="log"})=>{let[u,h]=a.useState(!0),{safeSetTimeout:m}=(0,l.A)();return(0,a.useEffect)(()=>{t&&m(()=>h(!1),t-300)},[m,t]),(0,n.jsx)(o.Z,{children:(0,n.jsx)("div",{className:"p-1 position-fixed bottom-0 left-0 mb-3 ml-3",children:(0,n.jsxs)("div",{className:`Toast ${c[i]} ${u?"Toast--animateIn":"Toast--animateOut"}`,id:"ui-app-toast","data-testid":`ui-app-toast-${i}`,role:r,children:[(0,n.jsx)("span",{className:"Toast-icon",children:s||d[i]}),(0,n.jsx)("span",{className:"Toast-content",children:e})]})})})};try{u.displayName||(u.displayName="Toast")}catch{}function h(){let{toasts:e,persistedToast:t}=(0,a.useContext)(i.T8);return(0,n.jsxs)(n.Fragment,{children:[e.map((e,t)=>(0,n.jsx)(u,{message:e.message,icon:e.icon,timeToLive:i.Qn,type:e.type,role:e.role},t)),t&&(0,n.jsx)(u,{message:t.message,icon:t.icon,type:t.type,role:t.role})]})}try{h.displayName||(h.displayName="Toasts")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["primer-react","react-core","react-lib","octicons-react","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_stacktrace-parser_dist_s-1d3d52","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-b1c483","vendors-node_modules_github_catalyst_lib_index_js-node_modules_primer_live-region-element_dis-b2aea6","ui_packages_failbot_failbot_ts"],()=>t(264)),e.O()}]);
//# sourceMappingURL=notifications-subscriptions-menu-3e9e3b5accb9.js.map